<div class="tech-radar-container">
  <!-- æ ‡é¢˜åŒºåŸŸ -->
  <div class="radar-header">
    <div class="header-content">
      <h2 class="radar-title">
        <span class="title-icon">ğŸ¯</span>
        æŠ€æœ¯é›·è¾¾å›¾
      </h2>
      <p class="radar-subtitle">åŠ¨æ€æŠ€èƒ½è¯„ä¼°ç³»ç»Ÿ - å­¦ä¹ è·¯å¾„æ¨èä¸è¡Œä¸šè¶‹åŠ¿åˆ†æ</p>
    </div>
    
    <!-- æ§åˆ¶é¢æ¿ -->
    <div class="radar-controls">
      <div class="control-group">
        <label class="control-label">è±¡é™ç­›é€‰:</label>
        <select [(ngModel)]="selectedQuadrant" (change)="filterByQuadrant(selectedQuadrant)" class="control-select">
          <option *ngFor="let option of quadrantOptions" [value]="option.value">
            {{ option.icon }} {{ option.label }}
          </option>
        </select>
      </div>
      
      <div class="control-group">
        <label class="control-label">ç¯çº§ç­›é€‰:</label>
        <select [(ngModel)]="selectedRing" (change)="filterByRing(selectedRing)" class="control-select">
          <option *ngFor="let option of ringOptions" [value]="option.value">
            {{ option.icon }} {{ option.label }}
          </option>
        </select>
      </div>
      
      <div class="control-group">
        <button (click)="resetFilters()" class="action-btn reset-btn">
          <span class="btn-icon">ğŸ”„</span>
          é‡ç½®ç­›é€‰
        </button>
      </div>
      
      <div class="control-group">
        <button (click)="analyzeTrends()" class="action-btn trend-btn">
          <span class="btn-icon">ğŸ“Š</span>
          è¶‹åŠ¿åˆ†æ
        </button>
      </div>
      
      <div class="control-group">
        <button (click)="exportRadarData()" class="action-btn export-btn">
          <span class="btn-icon">ğŸ“¤</span>
          å¯¼å‡ºæ•°æ®
        </button>
      </div>
    </div>
  </div>

  <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
  <div class="radar-content">
    
    <!-- é›·è¾¾å›¾åŒºåŸŸ -->
    <div class="radar-section">
      <div class="radar-canvas-container">
        <canvas #radarCanvas width="600" height="600" class="radar-canvas"></canvas>
        
        <!-- é›·è¾¾å›¾å›¾ä¾‹ -->
        <div class="radar-legend">
          <div class="legend-section">
            <h4 class="legend-title">è±¡é™</h4>
            <div class="legend-items">
              <div *ngFor="let quadrant of radarConfig.quadrants" class="legend-item">
                <div class="legend-color" [style.background-color]="quadrant.color"></div>
                <span class="legend-label">{{ quadrant.label }}</span>
              </div>
            </div>
          </div>
          
          <div class="legend-section">
            <h4 class="legend-title">ç¯çº§</h4>
            <div class="legend-items">
              <div *ngFor="let ring of radarConfig.rings" class="legend-item">
                <div class="legend-color" [style.background-color]="ring.color"></div>
                <span class="legend-label">{{ ring.label }}</span>
              </div>
            </div>
          </div>
          
          <div class="legend-section">
            <h4 class="legend-title">è¶‹åŠ¿</h4>
            <div class="legend-items">
              <div class="legend-item">
                <span class="trend-icon">ğŸ“ˆ</span>
                <span class="legend-label">ä¸Šå‡</span>
              </div>
              <div class="legend-item">
                <span class="trend-icon">â¡ï¸</span>
                <span class="legend-label">ç¨³å®š</span>
              </div>
              <div class="legend-item">
                <span class="trend-icon">ğŸ“‰</span>
                <span class="legend-label">ä¸‹é™</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- æŠ€æœ¯åˆ—è¡¨åŒºåŸŸ -->
    <div class="tech-list-section">
      <h3 class="section-title">
        <span class="section-icon">ğŸ’»</span>
        æŠ€æœ¯é¡¹ç›®åˆ—è¡¨
      </h3>
      
      <div class="tech-grid">
        <div *ngFor="let tech of getFilteredTechItems()" 
             class="tech-card" 
             (click)="selectTech(tech)"
             [class.selected]="selectedTech?.id === tech.id">
          
          <!-- æŠ€æœ¯å¡ç‰‡å¤´éƒ¨ -->
          <div class="tech-header">
            <div class="tech-name">{{ tech.name }}</div>
            <div class="tech-trend">{{ getTrendIcon(tech.trend) }}</div>
          </div>
          
          <!-- æŠ€æœ¯ä¿¡æ¯ -->
          <div class="tech-info">
            <div class="tech-meta">
              <span class="tech-quadrant" [style.color]="getQuadrantColor(tech.quadrant)">
                {{ getQuadrantLabel(tech.quadrant) }}
              </span>
              <span class="tech-ring" [style.color]="getRingColor(tech.ring)">
                {{ getRingLabel(tech.ring) }}
              </span>
            </div>
            
            <div class="tech-description">{{ tech.description }}</div>
            
            <!-- æŠ€èƒ½æŒ‡æ ‡ -->
            <div class="tech-metrics">
              <div class="metric">
                <span class="metric-label">ç†Ÿç»ƒåº¦</span>
                <div class="metric-bar">
                  <div class="metric-fill" [style.width.%]="tech.level * 10"></div>
                </div>
                <span class="metric-value">{{ getSkillLevelDescription(tech.level) }}</span>
              </div>
              
              <div class="metric">
                <span class="metric-label">å¸‚åœºéœ€æ±‚</span>
                <div class="metric-bar">
                  <div class="metric-fill demand" [style.width.%]="tech.marketDemand * 10"></div>
                </div>
                <span class="metric-value">{{ tech.marketDemand }}/10</span>
              </div>
              
              <div class="metric">
                <span class="metric-label">æœªæ¥å‰æ™¯</span>
                <div class="metric-bar">
                  <div class="metric-fill prospect" [style.width.%]="tech.futureProspect * 10"></div>
                </div>
                <span class="metric-value">{{ tech.futureProspect }}/10</span>
              </div>
            </div>
            
            <!-- ç«äº‰åŠ›è¯„åˆ† -->
            <div class="competitiveness-score">
              <span class="score-label">ç«äº‰åŠ›è¯„åˆ†:</span>
              <span class="score-value">{{ calculateCompetitiveness(tech) }}/10</span>
            </div>
          </div>
          
          <!-- æ“ä½œæŒ‰é’® -->
          <div class="tech-actions">
            <button (click)="generateLearningPath(tech); $event.stopPropagation()" 
                    class="action-btn learning-btn"
                    [disabled]="isGeneratingPath">
              <span class="btn-icon">ğŸ“</span>
              {{ isGeneratingPath ? 'ç”Ÿæˆä¸­...' : 'å­¦ä¹ è·¯å¾„' }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- æŠ€æœ¯è¯¦æƒ…æ¨¡æ€æ¡† -->
  <div *ngIf="selectedTech" class="modal-overlay" (click)="closeModal()">
    <div class="modal-content tech-detail-modal" (click)="$event.stopPropagation()">
      <!-- æ¨¡æ€æ¡†å¤´éƒ¨ -->
      <div class="modal-header">
        <h3 class="modal-title">{{ selectedTech.name }} è¯¦ç»†ä¿¡æ¯</h3>
        <button (click)="closeModal()" class="close-btn">&times;</button>
      </div>
      
      <!-- æ¨¡æ€æ¡†å†…å®¹ -->
      <div class="modal-body">
        <div class="tech-detail-content">
          <!-- åŸºæœ¬ä¿¡æ¯ -->
          <div class="detail-section">
            <h4 class="detail-title">åŸºæœ¬ä¿¡æ¯</h4>
            <div class="detail-grid">
              <div class="detail-item">
                <span class="detail-label">æŠ€æœ¯åç§°:</span>
                <span class="detail-value">{{ selectedTech.name }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">æ‰€å±è±¡é™:</span>
                <span class="detail-value" [style.color]="getQuadrantColor(selectedTech.quadrant)">
                  {{ getQuadrantLabel(selectedTech.quadrant) }}
                </span>
              </div>
              <div class="detail-item">
                <span class="detail-label">é‡‡ç”¨ç¯çº§:</span>
                <span class="detail-value" [style.color]="getRingColor(selectedTech.ring)">
                  {{ getRingLabel(selectedTech.ring) }}
                </span>
              </div>
              <div class="detail-item">
                <span class="detail-label">å‘å±•è¶‹åŠ¿:</span>
                <span class="detail-value">
                  {{ getTrendIcon(selectedTech.trend) }}
                  {{ selectedTech.trend === 'rising' ? 'ä¸Šå‡' : 
                     selectedTech.trend === 'stable' ? 'ç¨³å®š' : 'ä¸‹é™' }}
                </span>
              </div>
            </div>
          </div>
          
          <!-- æŠ€èƒ½è¯„ä¼° -->
          <div class="detail-section">
            <h4 class="detail-title">æŠ€èƒ½è¯„ä¼°</h4>
            <div class="assessment-grid">
              <div class="assessment-item">
                <div class="assessment-header">
                  <span class="assessment-label">ä¸ªäººç†Ÿç»ƒåº¦</span>
                  <span class="assessment-score">{{ selectedTech.level }}/10</span>
                </div>
                <div class="assessment-bar">
                  <div class="assessment-fill skill" [style.width.%]="selectedTech.level * 10"></div>
                </div>
                <div class="assessment-desc">{{ getSkillLevelDescription(selectedTech.level) }}</div>
              </div>
              
              <div class="assessment-item">
                <div class="assessment-header">
                  <span class="assessment-label">å¸‚åœºéœ€æ±‚åº¦</span>
                  <span class="assessment-score">{{ selectedTech.marketDemand }}/10</span>
                </div>
                <div class="assessment-bar">
                  <div class="assessment-fill demand" [style.width.%]="selectedTech.marketDemand * 10"></div>
                </div>
                <div class="assessment-desc">
                  {{ selectedTech.marketDemand >= 8 ? 'éœ€æ±‚æ—ºç››' : 
                     selectedTech.marketDemand >= 6 ? 'éœ€æ±‚ç¨³å®š' : 'éœ€æ±‚ä¸€èˆ¬' }}
                </div>
              </div>
              
              <div class="assessment-item">
                <div class="assessment-header">
                  <span class="assessment-label">æœªæ¥å‰æ™¯</span>
                  <span class="assessment-score">{{ selectedTech.futureProspect }}/10</span>
                </div>
                <div class="assessment-bar">
                  <div class="assessment-fill prospect" [style.width.%]="selectedTech.futureProspect * 10"></div>
                </div>
                <div class="assessment-desc">
                  {{ selectedTech.futureProspect >= 8 ? 'å‰æ™¯å¹¿é˜”' : 
                     selectedTech.futureProspect >= 6 ? 'å‰æ™¯è‰¯å¥½' : 'å‰æ™¯ä¸€èˆ¬' }}
                </div>
              </div>
              
              <div class="assessment-item competitiveness">
                <div class="assessment-header">
                  <span class="assessment-label">ç»¼åˆç«äº‰åŠ›</span>
                  <span class="assessment-score">{{ calculateCompetitiveness(selectedTech) }}/10</span>
                </div>
                <div class="assessment-bar">
                  <div class="assessment-fill competitiveness" [style.width.%]="calculateCompetitiveness(selectedTech) * 10"></div>
                </div>
                <div class="assessment-desc">
                  {{ calculateCompetitiveness(selectedTech) >= 8 ? 'ç«äº‰åŠ›å¼º' : 
                     calculateCompetitiveness(selectedTech) >= 6 ? 'ç«äº‰åŠ›ä¸­ç­‰' : 'éœ€è¦æå‡' }}
                </div>
              </div>
            </div>
          </div>
          
          <!-- æŠ€æœ¯æè¿° -->
          <div class="detail-section">
            <h4 class="detail-title">æŠ€æœ¯æè¿°</h4>
            <p class="tech-description-full">{{ selectedTech.description }}</p>
          </div>
          
          <!-- æ“ä½œæŒ‰é’® -->
          <div class="detail-actions">
            <button (click)="generateLearningPath(selectedTech)" 
                    class="action-btn primary-btn"
                    [disabled]="isGeneratingPath">
              <span class="btn-icon">ğŸ“</span>
              {{ isGeneratingPath ? 'ç”Ÿæˆå­¦ä¹ è·¯å¾„ä¸­...' : 'ç”Ÿæˆå­¦ä¹ è·¯å¾„' }}
            </button>
            
            <button (click)="analyzeTrends()" 
                    class="action-btn secondary-btn"
                    [disabled]="isAnalyzingTrends">
              <span class="btn-icon">ğŸ“Š</span>
              {{ isAnalyzingTrends ? 'åˆ†æä¸­...' : 'è¡Œä¸šè¶‹åŠ¿åˆ†æ' }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- å­¦ä¹ è·¯å¾„æ¨¡æ€æ¡† -->
  <div *ngIf="showLearningPath" class="modal-overlay" (click)="closeModal()">
    <div class="modal-content learning-path-modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3 class="modal-title">
          <span class="modal-icon">ğŸ“</span>
          å­¦ä¹ è·¯å¾„æ¨è
        </h3>
        <button (click)="closeModal()" class="close-btn">&times;</button>
      </div>

      <div class="modal-body">
        <div *ngIf="isGeneratingPath" class="generating-state">
          <div class="loading-spinner"></div>
          <p class="loading-text">AIæ­£åœ¨ä¸ºæ‚¨ç”Ÿæˆä¸ªæ€§åŒ–å­¦ä¹ è·¯å¾„...</p>
        </div>

        <div *ngIf="!isGeneratingPath && learningPaths.length > 0" class="learning-paths">
          <div *ngFor="let path of learningPaths.slice(0, 3)" class="learning-path-card">
            <div class="path-header">
              <h4 class="path-title">{{ path.title }}</h4>
              <div class="path-meta">
                <span class="path-duration">{{ path.duration }}</span>
                <span class="path-difficulty" [class]="'difficulty-' + path.difficulty">
                  {{ path.difficulty === 'beginner' ? 'åˆçº§' :
                     path.difficulty === 'intermediate' ? 'ä¸­çº§' : 'é«˜çº§' }}
                </span>
              </div>
            </div>

            <p class="path-description">{{ path.description }}</p>

            <!-- å‰ç½®æ¡ä»¶ -->
            <div class="path-section">
              <h5 class="section-title">å‰ç½®æ¡ä»¶</h5>
              <div class="prerequisites">
                <span *ngFor="let prereq of path.prerequisites" class="prerequisite-tag">
                  {{ prereq }}
                </span>
              </div>
            </div>

            <!-- å­¦ä¹ æ­¥éª¤ -->
            <div class="path-section">
              <h5 class="section-title">å­¦ä¹ æ­¥éª¤</h5>
              <div class="learning-steps">
                <div *ngFor="let step of path.steps; let i = index" class="learning-step">
                  <div class="step-number">{{ i + 1 }}</div>
                  <div class="step-content">
                    <h6 class="step-title">{{ step.title }}</h6>
                    <p class="step-description">{{ step.description }}</p>
                    <div class="step-meta">
                      <span class="step-time">â±ï¸ {{ step.estimatedTime }}</span>
                      <span class="step-status" [class.completed]="step.completed">
                        {{ step.completed ? 'âœ… å·²å®Œæˆ' : 'â³ å¾…å®Œæˆ' }}
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- å­¦ä¹ æˆæœ -->
            <div class="path-section">
              <h5 class="section-title">é¢„æœŸæˆæœ</h5>
              <div class="outcomes">
                <div *ngFor="let outcome of path.outcomes" class="outcome-item">
                  <span class="outcome-icon">ğŸ¯</span>
                  <span class="outcome-text">{{ outcome }}</span>
                </div>
              </div>
            </div>

            <!-- è·¯å¾„æ“ä½œ -->
            <div class="path-actions">
              <button class="action-btn start-btn">
                <span class="btn-icon">ğŸš€</span>
                å¼€å§‹å­¦ä¹ 
              </button>
              <button class="action-btn bookmark-btn">
                <span class="btn-icon">ğŸ”–</span>
                æ”¶è—è·¯å¾„
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- è¡Œä¸šè¶‹åŠ¿åˆ†ææ¨¡æ€æ¡† -->
  <div *ngIf="showTrendAnalysis" class="modal-overlay" (click)="closeModal()">
    <div class="modal-content trend-analysis-modal" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3 class="modal-title">
          <span class="modal-icon">ğŸ“Š</span>
          è¡Œä¸šè¶‹åŠ¿åˆ†æ
        </h3>
        <button (click)="closeModal()" class="close-btn">&times;</button>
      </div>

      <div class="modal-body">
        <div *ngIf="isAnalyzingTrends" class="analyzing-state">
          <div class="loading-spinner"></div>
          <p class="loading-text">AIæ­£åœ¨åˆ†ææœ€æ–°è¡Œä¸šè¶‹åŠ¿æ•°æ®...</p>
        </div>

        <div *ngIf="!isAnalyzingTrends" class="trend-analysis">
          <!-- è¶‹åŠ¿æ¦‚è§ˆ -->
          <div class="trend-overview">
            <h4 class="overview-title">æŠ€æœ¯è¶‹åŠ¿æ¦‚è§ˆ</h4>
            <div class="trend-stats">
              <div class="trend-stat">
                <div class="stat-value">{{ getRisingTechCount() }}</div>
                <div class="stat-label">ä¸Šå‡è¶‹åŠ¿</div>
                <div class="stat-icon rising">ğŸ“ˆ</div>
              </div>
              <div class="trend-stat">
                <div class="stat-value">{{ getStableTechCount() }}</div>
                <div class="stat-label">ç¨³å®šå‘å±•</div>
                <div class="stat-icon stable">â¡ï¸</div>
              </div>
              <div class="trend-stat">
                <div class="stat-value">{{ getDecliningTechCount() }}</div>
                <div class="stat-label">ä¸‹é™è¶‹åŠ¿</div>
                <div class="stat-icon declining">ğŸ“‰</div>
              </div>
            </div>
          </div>

          <!-- è¯¦ç»†è¶‹åŠ¿åˆ†æ -->
          <div class="detailed-trends">
            <div *ngFor="let trend of industryTrends" class="trend-card">
              <div class="trend-header">
                <h5 class="trend-title">{{ trend.technology }}</h5>
                <div class="trend-badge" [class]="'trend-' + trend.trend">
                  {{ trend.trend === 'emerging' ? 'æ–°å…´' :
                     trend.trend === 'growing' ? 'å¢é•¿' :
                     trend.trend === 'mature' ? 'æˆç†Ÿ' : 'è¡°é€€' }}
                </div>
              </div>

              <div class="trend-metrics">
                <div class="trend-metric">
                  <span class="metric-label">é‡‡ç”¨ç‡</span>
                  <div class="metric-bar">
                    <div class="metric-fill adoption" [style.width.%]="trend.adoptionRate"></div>
                  </div>
                  <span class="metric-value">{{ trend.adoptionRate }}%</span>
                </div>

                <div class="trend-metric">
                  <span class="metric-label">å¸‚åœºå¢é•¿</span>
                  <div class="metric-bar">
                    <div class="metric-fill growth" [style.width.%]="trend.marketGrowth * 2"></div>
                  </div>
                  <span class="metric-value">{{ trend.marketGrowth }}%</span>
                </div>

                <div class="trend-metric">
                  <span class="metric-label">èŒä½éœ€æ±‚</span>
                  <div class="metric-bar">
                    <div class="metric-fill demand" [style.width.%]="trend.jobDemand * 10"></div>
                  </div>
                  <span class="metric-value">{{ trend.jobDemand }}/10</span>
                </div>
              </div>

              <div class="trend-details">
                <div class="salary-range">
                  <span class="detail-label">è–ªèµ„èŒƒå›´:</span>
                  <span class="detail-value">
                    {{ formatSalaryRange(trend.salaryRange.min, trend.salaryRange.max) }}
                  </span>
                </div>

                <div class="key-companies">
                  <span class="detail-label">ä¸»è¦å…¬å¸:</span>
                  <div class="company-tags">
                    <span *ngFor="let company of getLimitedCompanies(trend.keyCompanies)" class="company-tag">
                      {{ company }}
                    </span>
                  </div>
                </div>

                <div class="related-tech">
                  <span class="detail-label">ç›¸å…³æŠ€æœ¯:</span>
                  <div class="tech-tags">
                    <span *ngFor="let tech of getLimitedTechnologies(trend.relatedTechnologies)" class="tech-tag">
                      {{ tech }}
                    </span>
                  </div>
                </div>

                <div class="future-outlook">
                  <span class="detail-label">æœªæ¥å±•æœ›:</span>
                  <p class="outlook-text">{{ trend.futureOutlook }}</p>
                </div>
              </div>
            </div>
          </div>

          <!-- ä¸ªæ€§åŒ–å»ºè®® -->
          <div class="personalized-recommendations">
            <h4 class="recommendations-title">ä¸ªæ€§åŒ–å»ºè®®</h4>
            <div class="recommendation-cards">
              <div class="recommendation-card priority-high">
                <div class="recommendation-header">
                  <span class="recommendation-icon">ğŸ”¥</span>
                  <span class="recommendation-title">é«˜ä¼˜å…ˆçº§æŠ€èƒ½</span>
                </div>
                <p class="recommendation-text">
                  åŸºäºå½“å‰æŠ€èƒ½ç»„åˆå’Œå¸‚åœºè¶‹åŠ¿ï¼Œå»ºè®®é‡ç‚¹å…³æ³¨AIé›†æˆå’Œäº‘åŸç”ŸæŠ€æœ¯ï¼Œè¿™äº›é¢†åŸŸéœ€æ±‚å¢é•¿è¿…é€Ÿä¸”è–ªèµ„æ°´å¹³è¾ƒé«˜ã€‚
                </p>
              </div>

              <div class="recommendation-card priority-medium">
                <div class="recommendation-header">
                  <span class="recommendation-icon">ğŸ“ˆ</span>
                  <span class="recommendation-title">æŠ€èƒ½æå‡å»ºè®®</span>
                </div>
                <p class="recommendation-text">
                  ç»§ç»­æ·±åŒ–ç°æœ‰æŠ€èƒ½çš„åŒæ—¶ï¼Œå¯ä»¥è€ƒè™‘å­¦ä¹ è¾¹ç¼˜è®¡ç®—å’ŒWebAssemblyç­‰æ–°å…´æŠ€æœ¯ï¼Œä¸ºæœªæ¥å‘å±•åšå¥½å‡†å¤‡ã€‚
                </p>
              </div>

              <div class="recommendation-card priority-low">
                <div class="recommendation-header">
                  <span class="recommendation-icon">ğŸ’¡</span>
                  <span class="recommendation-title">é•¿æœŸè§„åˆ’</span>
                </div>
                <p class="recommendation-text">
                  å…³æ³¨é‡å­è®¡ç®—å’Œç”Ÿç‰©ä¿¡æ¯å­¦ç­‰å‰æ²¿é¢†åŸŸï¼Œè™½ç„¶ç›®å‰åº”ç”¨æœ‰é™ï¼Œä½†æœªæ¥5-10å¹´å¯èƒ½æˆä¸ºé‡è¦çš„æŠ€æœ¯æ–¹å‘ã€‚
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
